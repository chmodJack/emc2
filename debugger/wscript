#!/usr/bin/env python
# -*- coding: iso-8859-1 -*-

import sys

def build(bld):
    uselib_custom = ''
    cppflags_custom = ''
    if sys.platform == 'cygwin':
        cppflags_custom = ' -D__USE_W32_SOCKETS'
        uselib_custom = ' WINSOCK'

    bld.objects(source='GDBConnectionManager.cpp',
        includes = '. ../bfdFontend ../utils ..',
        use = 'SYSTEMC BOOST BOOST_REGEX BOOST_THREAD' + uselib_custom,
        target = 'debugger',
        install_path = None,
        cxxflags = cppflags_custom
    )

    bld.install_files('${PREFIX}/include', 'GDBStub.hpp GDBConnectionManager.hpp BreakpointManager.hpp WatchpointManager.hpp')
